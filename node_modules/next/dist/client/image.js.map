{"version":3,"sources":["../../client/image.tsx"],"names":["window","global","__NEXT_IMAGE_IMPORTED","VALID_LOADING_VALUES","undefined","loaders","Map","imgixLoader","cloudinaryLoader","akamaiLoader","defaultLoader","VALID_LAYOUT_VALUES","deviceSizes","configDeviceSizes","imageSizes","configImageSizes","loader","configLoader","path","configPath","domains","configDomains","process","env","__NEXT_IMAGE_OPTS","imageConfigDefault","allSizes","sort","a","b","getWidths","width","layout","widths","kind","Set","map","w","find","p","length","callLoader","loaderProps","load","get","root","Error","VALID_LOADERS","join","generateImgAttrs","src","unoptimized","quality","sizes","last","srcSet","i","getInt","x","parseInt","Image","priority","loading","className","height","objectFit","objectPosition","all","rest","unsized","Boolean","NODE_ENV","JSON","stringify","includes","String","isLazy","startsWith","setRef","isIntersected","rootMargin","disabled","isVisible","widthInt","heightInt","qualityInt","wrapperStyle","sizerStyle","sizerSvg","imgStyle","visibility","position","top","left","bottom","right","boxSizing","padding","border","margin","display","minWidth","maxWidth","minHeight","maxHeight","quotient","paddingTop","isNaN","overflow","imgAttributes","normalizeSrc","slice","params","paramsString","push","missingValues","parsedSrc","URL","err","console","error","hostname","encodeURIComponent"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { toBase64 } from '../next-server/lib/to-base-64'\nimport {\n  ImageConfig,\n  imageConfigDefault,\n  LoaderValue,\n  VALID_LOADERS,\n} from '../next-server/server/image-config'\nimport { useIntersection } from './use-intersection'\n\nif (typeof window === 'undefined') {\n  ;(global as any).__NEXT_IMAGE_IMPORTED = true\n}\n\nconst VALID_LOADING_VALUES = ['lazy', 'eager', undefined] as const\ntype LoadingValue = typeof VALID_LOADING_VALUES[number]\n\nconst loaders = new Map<LoaderValue, (props: LoaderProps) => string>([\n  ['imgix', imgixLoader],\n  ['cloudinary', cloudinaryLoader],\n  ['akamai', akamaiLoader],\n  ['default', defaultLoader],\n])\n\nconst VALID_LAYOUT_VALUES = [\n  'fill',\n  'fixed',\n  'intrinsic',\n  'responsive',\n  undefined,\n] as const\ntype LayoutValue = typeof VALID_LAYOUT_VALUES[number]\n\ntype ImgElementStyle = NonNullable<JSX.IntrinsicElements['img']['style']>\n\nexport type ImageProps = Omit<\n  JSX.IntrinsicElements['img'],\n  'src' | 'srcSet' | 'ref' | 'width' | 'height' | 'loading' | 'style'\n> & {\n  src: string\n  quality?: number | string\n  priority?: boolean\n  loading?: LoadingValue\n  unoptimized?: boolean\n  objectFit?: ImgElementStyle['objectFit']\n  objectPosition?: ImgElementStyle['objectPosition']\n} & (\n    | {\n        width?: never\n        height?: never\n        /** @deprecated Use `layout=\"fill\"` instead */\n        unsized: true\n      }\n    | { width?: never; height?: never; layout: 'fill' }\n    | {\n        width: number | string\n        height: number | string\n        layout?: Exclude<LayoutValue, 'fill'>\n      }\n  )\n\nconst {\n  deviceSizes: configDeviceSizes,\n  imageSizes: configImageSizes,\n  loader: configLoader,\n  path: configPath,\n  domains: configDomains,\n} =\n  ((process.env.__NEXT_IMAGE_OPTS as any) as ImageConfig) || imageConfigDefault\n// sort smallest to largest\nconst allSizes = [...configDeviceSizes, ...configImageSizes]\nconfigDeviceSizes.sort((a, b) => a - b)\nallSizes.sort((a, b) => a - b)\n\nfunction getWidths(\n  width: number | undefined,\n  layout: LayoutValue\n): { widths: number[]; kind: 'w' | 'x' } {\n  if (\n    typeof width !== 'number' ||\n    layout === 'fill' ||\n    layout === 'responsive'\n  ) {\n    return { widths: configDeviceSizes, kind: 'w' }\n  }\n\n  const widths = [\n    ...new Set(\n      [width, width * 2, width * 3].map(\n        (w) => allSizes.find((p) => p >= w) || allSizes[allSizes.length - 1]\n      )\n    ),\n  ]\n  return { widths, kind: 'x' }\n}\n\ntype CallLoaderProps = {\n  src: string\n  width: number\n  quality?: number\n}\n\nfunction callLoader(loaderProps: CallLoaderProps) {\n  const load = loaders.get(configLoader)\n  if (load) {\n    return load({ root: configPath, ...loaderProps })\n  }\n  throw new Error(\n    `Unknown \"loader\" found in \"next.config.js\". Expected: ${VALID_LOADERS.join(\n      ', '\n    )}. Received: ${configLoader}`\n  )\n}\n\ntype GenImgAttrsData = {\n  src: string\n  unoptimized: boolean\n  layout: LayoutValue\n  width?: number\n  quality?: number\n  sizes?: string\n}\n\ntype GenImgAttrsResult = Pick<\n  JSX.IntrinsicElements['img'],\n  'src' | 'sizes' | 'srcSet'\n>\n\nfunction generateImgAttrs({\n  src,\n  unoptimized,\n  layout,\n  width,\n  quality,\n  sizes,\n}: GenImgAttrsData): GenImgAttrsResult {\n  if (unoptimized) {\n    return { src }\n  }\n\n  const { widths, kind } = getWidths(width, layout)\n  const last = widths.length - 1\n\n  const srcSet = widths\n    .map(\n      (w, i) =>\n        `${callLoader({ src, quality, width: w })} ${\n          kind === 'w' ? w : i + 1\n        }${kind}`\n    )\n    .join(', ')\n\n  if (!sizes && kind === 'w') {\n    sizes = '100vw'\n  }\n\n  src = callLoader({ src, quality, width: widths[last] })\n\n  return { src, sizes, srcSet }\n}\n\nfunction getInt(x: unknown): number | undefined {\n  if (typeof x === 'number') {\n    return x\n  }\n  if (typeof x === 'string') {\n    return parseInt(x, 10)\n  }\n  return undefined\n}\n\nexport default function Image({\n  src,\n  sizes,\n  unoptimized = false,\n  priority = false,\n  loading,\n  className,\n  quality,\n  width,\n  height,\n  objectFit,\n  objectPosition,\n  ...all\n}: ImageProps) {\n  let rest: Partial<ImageProps> = all\n  let layout: NonNullable<LayoutValue> = sizes ? 'responsive' : 'intrinsic'\n  let unsized = false\n  if ('unsized' in rest) {\n    unsized = Boolean(rest.unsized)\n    // Remove property so it's not spread into image:\n    delete rest['unsized']\n  } else if ('layout' in rest) {\n    // Override default layout if the user specified one:\n    if (rest.layout) layout = rest.layout\n\n    // Remove property so it's not spread into image:\n    delete rest['layout']\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (!src) {\n      throw new Error(\n        `Image is missing required \"src\" property. Make sure you pass \"src\" in props to the \\`next/image\\` component. Received: ${JSON.stringify(\n          { width, height, quality }\n        )}`\n      )\n    }\n    if (!VALID_LAYOUT_VALUES.includes(layout)) {\n      throw new Error(\n        `Image with src \"${src}\" has invalid \"layout\" property. Provided \"${layout}\" should be one of ${VALID_LAYOUT_VALUES.map(\n          String\n        ).join(',')}.`\n      )\n    }\n    if (!VALID_LOADING_VALUES.includes(loading)) {\n      throw new Error(\n        `Image with src \"${src}\" has invalid \"loading\" property. Provided \"${loading}\" should be one of ${VALID_LOADING_VALUES.map(\n          String\n        ).join(',')}.`\n      )\n    }\n    if (priority && loading === 'lazy') {\n      throw new Error(\n        `Image with src \"${src}\" has both \"priority\" and \"loading='lazy'\" properties. Only one should be used.`\n      )\n    }\n    if (unsized) {\n      throw new Error(\n        `Image with src \"${src}\" has deprecated \"unsized\" property, which was removed in favor of the \"layout='fill'\" property`\n      )\n    }\n  }\n\n  let isLazy =\n    !priority && (loading === 'lazy' || typeof loading === 'undefined')\n  if (src && src.startsWith('data:')) {\n    // https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs\n    unoptimized = true\n    isLazy = false\n  }\n\n  const [setRef, isIntersected] = useIntersection<HTMLImageElement>({\n    rootMargin: '200px',\n    disabled: !isLazy,\n  })\n  const isVisible = !isLazy || isIntersected\n\n  const widthInt = getInt(width)\n  const heightInt = getInt(height)\n  const qualityInt = getInt(quality)\n\n  let wrapperStyle: JSX.IntrinsicElements['div']['style'] | undefined\n  let sizerStyle: JSX.IntrinsicElements['div']['style'] | undefined\n  let sizerSvg: string | undefined\n  let imgStyle: ImgElementStyle | undefined = {\n    visibility: isVisible ? 'visible' : 'hidden',\n\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n\n    boxSizing: 'border-box',\n    padding: 0,\n    border: 'none',\n    margin: 'auto',\n\n    display: 'block',\n    width: 0,\n    height: 0,\n    minWidth: '100%',\n    maxWidth: '100%',\n    minHeight: '100%',\n    maxHeight: '100%',\n\n    objectFit,\n    objectPosition,\n  }\n  if (\n    typeof widthInt !== 'undefined' &&\n    typeof heightInt !== 'undefined' &&\n    layout !== 'fill'\n  ) {\n    // <Image src=\"i.png\" width=\"100\" height=\"100\" />\n    const quotient = heightInt / widthInt\n    const paddingTop = isNaN(quotient) ? '100%' : `${quotient * 100}%`\n    if (layout === 'responsive') {\n      // <Image src=\"i.png\" width=\"100\" height=\"100\" layout=\"responsive\" />\n      wrapperStyle = {\n        display: 'block',\n        overflow: 'hidden',\n        position: 'relative',\n\n        boxSizing: 'border-box',\n        margin: 0,\n      }\n      sizerStyle = { display: 'block', boxSizing: 'border-box', paddingTop }\n    } else if (layout === 'intrinsic') {\n      // <Image src=\"i.png\" width=\"100\" height=\"100\" layout=\"intrinsic\" />\n      wrapperStyle = {\n        display: 'inline-block',\n        maxWidth: '100%',\n        overflow: 'hidden',\n        position: 'relative',\n        boxSizing: 'border-box',\n        margin: 0,\n      }\n      sizerStyle = {\n        boxSizing: 'border-box',\n        display: 'block',\n        maxWidth: '100%',\n      }\n      sizerSvg = `<svg width=\"${widthInt}\" height=\"${heightInt}\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\"/>`\n    } else if (layout === 'fixed') {\n      // <Image src=\"i.png\" width=\"100\" height=\"100\" layout=\"fixed\" />\n      wrapperStyle = {\n        overflow: 'hidden',\n        boxSizing: 'border-box',\n        display: 'inline-block',\n        position: 'relative',\n        width: widthInt,\n        height: heightInt,\n      }\n    }\n  } else if (\n    typeof widthInt === 'undefined' &&\n    typeof heightInt === 'undefined' &&\n    layout === 'fill'\n  ) {\n    // <Image src=\"i.png\" layout=\"fill\" />\n    wrapperStyle = {\n      display: 'block',\n      overflow: 'hidden',\n\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      bottom: 0,\n      right: 0,\n\n      boxSizing: 'border-box',\n      margin: 0,\n    }\n  } else {\n    // <Image src=\"i.png\" />\n    if (process.env.NODE_ENV !== 'production') {\n      throw new Error(\n        `Image with src \"${src}\" must use \"width\" and \"height\" properties or \"layout='fill'\" property.`\n      )\n    }\n  }\n\n  let imgAttributes: GenImgAttrsResult = {\n    src:\n      'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',\n  }\n\n  if (isVisible) {\n    imgAttributes = generateImgAttrs({\n      src,\n      unoptimized,\n      layout,\n      width: widthInt,\n      quality: qualityInt,\n      sizes,\n    })\n  }\n\n  if (unsized) {\n    wrapperStyle = undefined\n    sizerStyle = undefined\n    imgStyle = undefined\n  }\n  return (\n    <div style={wrapperStyle}>\n      {sizerStyle ? (\n        <div style={sizerStyle}>\n          {sizerSvg ? (\n            <img\n              style={{ maxWidth: '100%', display: 'block' }}\n              alt=\"\"\n              aria-hidden={true}\n              role=\"presentation\"\n              src={`data:image/svg+xml;base64,${toBase64(sizerSvg)}`}\n            />\n          ) : null}\n        </div>\n      ) : null}\n      <img\n        {...rest}\n        {...imgAttributes}\n        decoding=\"async\"\n        className={className}\n        ref={setRef}\n        style={imgStyle}\n      />\n    </div>\n  )\n}\n\n//BUILT IN LOADERS\n\ntype LoaderProps = CallLoaderProps & { root: string }\n\nfunction normalizeSrc(src: string) {\n  return src[0] === '/' ? src.slice(1) : src\n}\n\nfunction imgixLoader({ root, src, width, quality }: LoaderProps): string {\n  // Demo: https://static.imgix.net/daisy.png?format=auto&fit=max&w=300\n  const params = ['auto=format', 'fit=max', 'w=' + width]\n  let paramsString = ''\n  if (quality) {\n    params.push('q=' + quality)\n  }\n\n  if (params.length) {\n    paramsString = '?' + params.join('&')\n  }\n  return `${root}${normalizeSrc(src)}${paramsString}`\n}\n\nfunction akamaiLoader({ root, src, width }: LoaderProps): string {\n  return `${root}${normalizeSrc(src)}?imwidth=${width}`\n}\n\nfunction cloudinaryLoader({ root, src, width, quality }: LoaderProps): string {\n  // Demo: https://res.cloudinary.com/demo/image/upload/w_300,c_limit,q_auto/turtles.jpg\n  const params = ['f_auto', 'c_limit', 'w_' + width, 'q_' + (quality || 'auto')]\n  let paramsString = params.join(',') + '/'\n  return `${root}${paramsString}${normalizeSrc(src)}`\n}\n\nfunction defaultLoader({ root, src, width, quality }: LoaderProps): string {\n  if (process.env.NODE_ENV !== 'production') {\n    const missingValues = []\n\n    // these should always be provided but make sure they are\n    if (!src) missingValues.push('src')\n    if (!width) missingValues.push('width')\n\n    if (missingValues.length > 0) {\n      throw new Error(\n        `Next Image Optimization requires ${missingValues.join(\n          ', '\n        )} to be provided. Make sure you pass them as props to the \\`next/image\\` component. Received: ${JSON.stringify(\n          { src, width, quality }\n        )}`\n      )\n    }\n\n    if (src.startsWith('//')) {\n      throw new Error(\n        `Failed to parse src \"${src}\" on \\`next/image\\`, protocol-relative URL (//) must be changed to an absolute URL (http:// or https://)`\n      )\n    }\n\n    if (!src.startsWith('/') && configDomains) {\n      let parsedSrc: URL\n      try {\n        parsedSrc = new URL(src)\n      } catch (err) {\n        console.error(err)\n        throw new Error(\n          `Failed to parse src \"${src}\" on \\`next/image\\`, if using relative image it must start with a leading slash \"/\" or be an absolute URL (http:// or https://)`\n        )\n      }\n\n      if (!configDomains.includes(parsedSrc.hostname)) {\n        throw new Error(\n          `Invalid src prop (${src}) on \\`next/image\\`, hostname \"${parsedSrc.hostname}\" is not configured under images in your \\`next.config.js\\`\\n` +\n            `See more info: https://err.sh/next.js/next-image-unconfigured-host`\n        )\n      }\n    }\n  }\n\n  return `${root}?url=${encodeURIComponent(src)}&w=${width}&q=${quality || 75}`\n}\n"]}